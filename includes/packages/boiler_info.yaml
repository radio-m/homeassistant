boiler_info:

  binary_sensor:
    - platform: template
      sensors:
        boiler:
          friendly_name: boiler_state
          value_template: "{{ states('sensor.bw_shp8_power') | float > 5 }}"

    - platform: template
      sensors:
        dishwasher:
          friendly_name: dishwasher_state
          value_template: "{{ states('sensor.load_dishwasher') | float >= 1 }}"

    - platform: template
      sensors:
        washing_machine:
          friendly_name: washing_machine_state
          value_template: "{{ states('sensor.load_broadlink_1') | float > 5 }}"

    - platform: tod
      name: boiler_time
      after: '23:00'
      before: '12:00'

    - platform: template
      sensors:
        boiler_timer:
          friendly_name: boiler_timer
          value_template: "{{ states('timer.boiler_low_voltage') != 'idle' }}"

  sensor:
    - platform: template
      sensors:
        boiler_power_state:
          friendly_name: boiler_power_state
          value_template: >                 # "{{ states('sensor.bw_shp8_power') | float > 5 }}"
            {% if is_state('switch.bw_shp8_relay', 'off') %}
              off
            {% elif states.sensor.bw_shp8_power.state|float < 5 %}
              standby
            {% elif states.sensor.bw_shp8_power.state|float > 5 %}
              heat
            {% else %}
              failed
            {% endif %}
