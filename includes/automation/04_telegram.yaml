- alias: Telegram bot that reply pong to ping
  id: "Telegram bot that reply pong to ping"
  trigger:
    platform: event
    event_type: telegram_command
    event_data:
      command: '/ping'
  action:
    - service: notify.telegram
      data:
        message: 'pong'
        
# - alias: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ - —Å—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –¥–æ—Å—Ç–∏—Ä–∞–ª–∞
#   trigger:
#     platform: state
#     entity_id: binary_sensor.washing_machine
#     from: "on"
#     to: "off"
#   condition:
#     - condition: state
#       entity_id: switch.broadlink_1
#       state: "on"
#   action:
#     # - service: notify.mobile_app_mi_9
#     #   data:
#     #     message: TTS
#     #     title: '–ú–∞—à–∏–Ω–∫–∞ –¥–æ—Å—Ç–∏—Ä–∞–ª–∞'
#     #     data:
#     #       channel: alarm_stream
#     #       priority: high
#     #       ttl: 0
#     - service: telegram_bot.send_message
#       data_template:
#         target: [!secret my_chat, !secret olga_chat]
#         message: '–ú–∞—à–∏–Ω–∫–∞ –¥–æ—Å—Ç–∏—Ä–∞–ª–∞'

# - alias: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ - —Å—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –æ—Ç–∫–ª—é—á–∏–ª–∞—Å—å
#   trigger:
#     platform: state
#     entity_id: switch.broadlink_1
#     from: "on"
#     to: "off"
#   condition:
#     - condition: state
#       entity_id: binary_sensor.washing_machine # switch.broadlink_1
#       state: "on"
#   action:
#     - service: notify.telegram
#       data:
#         message: '–†–æ–∑–µ—Ç–∫–∞ —Å—Ç–∏—Ä–∞–ª–∫–∏ –æ—Ç–∫–ª—é—á–∏–ª–∞—Å—å. –í–∫–ª—é—á–∏—Ç—å?'
#         data:
#           inline_keyboard:
#             - '–î–∞:/washing_machine_turn_on, –ù–µ—Ç:/washing_machine_turn_off'

#     - service: notify.telegram_olga
#       data:
#         message: '–†–æ–∑–µ—Ç–∫–∞ —Å—Ç–∏—Ä–∞–ª–∫–∏ –æ—Ç–∫–ª—é—á–∏–ª–∞—Å—å. –í–∫–ª—é—á–∏—Ç—å?'
#         data:
#           inline_keyboard:
#             - '–î–∞:/washing_machine_turn_on, –ù–µ—Ç:/washing_machine_turn_off'

# - alias: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ - —Å—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –ø–∏—Ç–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
#   trigger:
#     platform: event
#     event_type: telegram_callback
#     event_data:
#       command: '/washing_machine_turn_on'
#   action:
#     - service: telegram_bot.send_message
#       data_template:
#         target: [!secret my_chat, !secret olga_chat]
#         message: '–†–æ–∑–µ—Ç–∫—É —É–∂–µ –∫—Ç–æ-—Ç–æ –≤–∫–ª—é—á–∏–ª'
#     - service: switch.turn_on
#       entity_id: switch.broadlink_1

- alias: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ - —É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—á–µ—Ç
  id: "Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ - —É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—á–µ—Ç"
  trigger:
    platform: time
    at: 07:10:00
  action:
    - service: notify.telegram
      data:
        message: |
          {%- set state = states('weather.home_assistant') -%}
          {% if state == 'clear-night' %} –Ø—Å–Ω–æ, –Ω–æ—á—å {{"\U0001F315"}}
          {% elif state == 'cloudy' %} –û–±–ª–∞—á–Ω–æ {{"\U00002601"}}
          {% elif state == 'exceptional' %} –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ {{"\U0001F6A8"}}
          {% elif state == 'fog' %} –¢—É–º–∞–Ω {{"\U0001F32B"}}
          {% elif state == 'hail' %} –ì—Ä–∞–¥ {{"\U0001F328"}}{{"\U0001F328"}}
          {% elif state == 'lightning' %} –ú–æ–ª–Ω–∏—è {{"\U0001F329"}}
          {% elif state == 'lightning-rainy' %} –ì—Ä–æ–∑–∞ {{"\U000026C8"}}
          {% elif state == 'partlycloudy' %} –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å {{"\U000026C5"}}
          {% elif state == 'pouring' %} –õ–∏–≤–µ–Ω—å {{"\U0001F327"}}{{"\U0001F327"}}
          {% elif state == 'rainy' %} –î–æ–∂–¥—å {{"\U0001F327"}}
          {% elif state == 'snowy' %} –°–Ω–µ–≥ {{"\U0001F328"}}
          {% elif state == 'snowy-rainy' %} –°–Ω–µ–≥ —Å –¥–æ–∂–¥–µ–º {{"\U0001F328"}}{{"\U0001F327"}}
          {% elif state == 'sunny' %} –Ø—Å–Ω–æ {{"\U00002600"}}
          {% elif state == 'windy' %} –í–µ—Ç—Ä–µ–Ω–æ {{"\U0001F32C"}}
          {% elif state == 'windy-variant' %} –í–µ—Ç—Ä–µ–Ω–æ {{"\U0001F32C"}}
          {% else %} –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö {% endif %}
          üå° {{ state_attr('weather.home_assistant', 'temperature') }} ¬∞C  üå¨ {{ state_attr('weather.home_assistant', 'wind_speed') }} –∫–º/—á
          
          üí° –ë–æ–π–ª–µ—Ä —Å–µ–≥–æ–¥–Ω—è –æ—Ç—Ä–∞–±–æ—Ç–∞–ª  {{ state_attr('sensor.boiler_on_today', 'value') }} –∏ —Å–∂–µ–≥ {{ states('sensor.mqtt_power_today_bw_shp8') | round(2)}} –∫–í—Ç‚Ä¢—á
          {% set heater = states('sensor.heater_on_today_count') %}
          {% if heater == '0' %}üî• –ö–æ—Ç–µ–ª –Ω–µ –≤–∫–ª—é—á–∞–ª—Å—è
          {% else %}üî• –ö–æ—Ç–µ–ª –∑–∞ —Å—É—Ç–∫–∏ —Ä–∞–±–æ—Ç–∞–ª {{ state_attr('sensor.heater_on_today', 'value') }}, –Ω–æ—á—å—é –≤–∫–ª—é—á–∞–ª—Å—è {{ states('sensor.heater_on_today_count')|format(morph='—Ä–∞–∑', as_text=false) }}{% endif %}
          üå° –≤–æ–¥—ã –≤ —Å–∏—Å—Ç–µ–º–µ {{states('sensor.water_system')}}, –≤ –±–æ–π–ª–µ—Ä–µ {{states('sensor.bw_shp8_ds18b20')}}
          
          
          


- alias: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ - –≥–∞–∑–æ–≤—ã–π –∫–æ—Ç–µ–ª
  id: "Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ - –≥–∞–∑–æ–≤—ã–π –∫–æ—Ç–µ–ª"
  trigger:
    platform: state
    entity_id: switch.gas_heater_relay
  action:
    - service: notify.telegram
      data:
        message: "–ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∞. –ì–∞–∑–æ–≤—ã–π –∫–æ—Ç–µ–ª {{ trigger.to_state.state }}"






